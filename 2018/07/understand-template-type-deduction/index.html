

  
    
  


  





  

<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.37.1">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>[EMCpp]Item-1 Understand Template Type Deduction - 刀心の水|Nzo</title>
    <meta name="author" content="刀心の水|Nzo">
    <meta name="keywords" content=", programming, photography, music, software, blog">

    <link rel="icon" href="http://nianze.ml/favicon.png">
    

    
    <meta name="description" content="There are three sets of rules for type deduction in modern C&#43;&#43;: one for function templates, one for auto, and one for decltype. Without a solid understanding of how deduction operates, effective programming in modern C&#43;&#43; is all but impossible.
">
    <meta property="og:description" content="There are three sets of rules for type deduction in modern C&#43;&#43;: one for function templates, one for auto, and one for decltype. Without a solid understanding of how deduction operates, effective programming in modern C&#43;&#43; is all but impossible.
">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="[EMCpp]Item-1 Understand Template Type Deduction">
    <meta property="og:url" content="/2018/07/understand-template-type-deduction/">
    <meta property="og:site_name" content="Code.Music.Photo">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Code.Music.Photo">
    <meta name="twitter:description" content="There are three sets of rules for type deduction in modern C&#43;&#43;: one for function templates, one for auto, and one for decltype. Without a solid understanding of how deduction operates, effective programming in modern C&#43;&#43; is all but impossible.
">
    
    

    
    

    
      <meta property="og:image" content="http://nianze.ml/images/bio-picture.jpg">
    

    
      <meta property="og:image" content="http://nianze.ml/images/2018/2018-07/02.gif">
    
    
    

    

    
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="http://nianze.ml/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    
      <link rel="stylesheet" href="http://nianze.ml/css/main.css">
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-71584380-1', 'auto');
ga('send', 'pageview');
</script>

    



    
  </head>

  <body>
        <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="http://nianze.ml/">刀心の水|Nzo - Code.Music.Photo</a>
  </div>
  
    
      <a class="header-right-picture "
         href="http://nianze.ml/#about">
    
    
    
      
        <img class="header-picture" src="http://nianze.ml/images/bio-picture.jpg" alt="作者的图片" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="http://nianze.ml/#about">
          <img class="sidebar-profile-picture" src="http://nianze.ml/images/bio-picture.jpg" alt="作者的图片" />
        </a>
        <h4 class="sidebar-profile-name">刀心の水|Nzo</h4>
        
          <h5 class="sidebar-profile-bio"><p>虚度廿余岁月浅，略识几行代码源。<br />
闲来随手快门按，黯然独把音韵弹。</p>

<p>A software developer who also love producing music and taking photo.</p>
</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home" title='Home'></i>
      
      <span class="sidebar-button-desc" title="Home">首页</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/categories/article">
    
      <i class="sidebar-button-icon fa fa-lg fa-file-text-o" title='Article'></i>
      
      <span class="sidebar-button-desc" title="Article">文章</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/categories/music">
    
      <i class="sidebar-button-icon fa fa-lg fa-music" title='Music'></i>
      
      <span class="sidebar-button-desc" title="Music">音乐</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/categories/photography">
    
      <i class="sidebar-button-icon fa fa-lg fa-camera" title='Photography'></i>
      
      <span class="sidebar-button-desc" title="Photography">摄影</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark" title='Categories'></i>
      
      <span class="sidebar-button-desc" title="Categories">分类</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags" title='Tags'></i>
      
      <span class="sidebar-button-desc" title="Tags">标签</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive" title='Archives'></i>
      
      <span class="sidebar-button-desc" title="Archives">归档</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.ml/about">
    
      <i class="sidebar-button-icon fa fa-lg fa-user" title='About'></i>
      
      <span class="sidebar-button-desc" title="About">关于</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/nianze" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin" title='LinkedIn'></i>
      
      <span class="sidebar-button-desc" title="LinkedIn">LinkedIn</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/Nianze" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-github" title='Github'></i>
      
      <span class="sidebar-button-desc" title="GitHub">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.flickr.com/photos/129774362@N07/" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-flickr", title='Flickr'></i>
      
      <span class="sidebar-button-desc" title="Flickr">Flickr</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://instagram.com/eznain" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-instagram" title='Instagram'></i>
      
      <span class="sidebar-button-desc" title="Instagram">Instagram</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.facebook.com/rym.lnz" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-facebook", title='Facebook'></i>
      
      <span class="sidebar-button-desc" title="Facebook">Facebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.youtube.com/user/daoxinzhishui" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-youtube", title='YouTube'></i>
      
      <span class="sidebar-button-desc" title="YouTube">YouTube</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://weibo.com/daoxinzhishui" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-weibo", title='Weibo'></i>
      
      <span class="sidebar-button-desc" title="Weibo">Weibo</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="mailto:daoxinzhishui@gmail.com">
    
      <i class="sidebar-button-icon fa fa-lg fa-envelope", title='Email'></i>
      
      <span class="sidebar-button-desc" title="Email">Email</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      [EMCpp]Item-1 Understand Template Type Deduction
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2018-07-02T22:44:34-04:00">
      
  七月 2, 2018

    </time>
  
  
  
  
    <span>发布在</span>
    
      <a class="category-link" href="http://nianze.ml/categories/article">article</a>, 
    
      <a class="category-link" href="http://nianze.ml/categories/coding">coding</a>
    
  


</div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>There are three sets of rules for type deduction in modern C++: one for function templates, one for <code>auto</code>, and one for <code>decltype</code>. Without a solid understanding of how deduction operates, effective programming in modern C++ is all but impossible.
</p>

<p>Since type deduction for templates is the basis of that for <code>auto</code>, it&rsquo;s important to truly understand the aspects of template type deduction that <code>auto</code> builds on: during template type deduction, there are three cases for parameter types:</p>

<ol>
<li>pointer type or non-universal reference type</li>
<li>universal reference type</li>
<li>neither a pointer nor a reference (value type)</li>
</ol>

<p>Moreover, there&rsquo;s a niche case worth knowing about, that arguments that are array or function names decay to pointers unless they&rsquo;re used to initialize references.</p>

<p>To tell the difference, let&rsquo;s think of a function template as looking like this:</p>

<pre><code class="language-cpp">tempalte&lt;typename T&gt;
void f(ParamType param);
f(expr); // deduce T and ParamType from expr
</code></pre>

<h4 id="case-1-paramtype-is-reference-or-pointer-but-not-a-universal-reference">Case 1: <code>ParamType</code> is Reference or Pointer, but not a Universal Reference</h4>

<p>The rules in this case works like this:</p>

<ol>
<li>If <code>expr</code>&rsquo;s type is a reference, ignore the reference part.</li>
<li>Then pattern-match <code>expr</code>&rsquo;s type against <code>ParamType</code> to determine T.</li>
</ol>

<p>For example,</p>

<pre><code class="language-cpp">template&lt;typename T&gt;
void f(T&amp; param);  // param is a reference

int x = 27;         // x is an int
const int cx = x;   // cx is a const int
const int&amp; rx = x;  // rx is a refrence to x as a const int

f(x);   // T is int, param's type is int&amp;
f(cx);  // T is const int, param's type is const int&amp;
f(rx);  // T is const int, param's type is const int&amp;
</code></pre>

<p>Note that even though rx&rsquo;s type is a reference, T is deduced to be a non-reference, because rx&rsquo;s reference-ness is ignored during type deduction.</p>

<pre><code class="language-cpp">template&lt;typename T&gt;
void f(const T&amp; param);  // param is now a ref-to-const, 
                         // so there's no longer a need for const to be deduced as part of T
f(x);  // T is int, param's type is const int&amp;
f(cx); // T is int, param's type is const int&amp;
f(rx); // T is int, param's type is const int&amp;
</code></pre>

<p>As before, rx&rsquo;s reference-ness is ignored during type deduction.</p>

<pre><code class="language-cpp">template&lt;typename T&gt;
void f(T* param);     // param is now a pointer

int x = 27;           // x is an int
const int *px = &amp;x;   // px is a ptr to x as a const int

f(&amp;x);   // T is int, param's type is int*
f(px);   // T is const int, param's type is const int*
</code></pre>

<p>As shown above, when param were a pointer (or a pointer to const), things work essentially the same way.</p>

<h4 id="case-2-paramtype-is-a-universal-reference">Case 2: <code>ParamType</code> is a Universal Reference</h4>

<p>Things are less obvious for templates taking universal reference paramters:</p>

<ol>
<li>If <code>expr</code> is an lvalue, both <code>T</code> and <code>ParamType</code> are deduced to be lvalue references.</li>
<li>If <code>expr</code> is an rvalue, the &ldquo;normal&rdquo; (i.e., case 1) rules apply.</li>
</ol>

<p>For example:</p>

<pre><code class="language-cpp">template&lt;typename T&gt;
void f(T&amp;&amp; param);  // param is now a universal reference

int x = 27;         // as before
const int cx = x;   // as before
const int&amp; rx = x;  // as before

f(x);  // x is lvalue, so T is int&amp;, param's type is also int&amp;
f(cx); // x is lvalue, so T is const int&amp;, param's type is also const int&amp;
f(rx); // x is lvalue, so T is const int&amp;, param's type is also const int&amp;
f(27); // x is rvlaue, so T is int, param's type is therefore int&amp;&amp;
</code></pre>

<p>EMCpp Item24 explains why these examples play out the way they do.</p>

<h4 id="case-3-paramtype-is-neither-a-pointer-nor-a-reference">Case 3: <code>ParamType</code> is Neither a Pointer nor a Reference</h4>

<p>In this case, we&rsquo;re dealing with pass-by-value. That means that <code>param</code> will be a new object, which motivates the rules below:</p>

<ol>
<li>As before, if <code>expr</code>&rsquo;s type is a reference, ignore the reference part</li>
<li>If, after ignoring <code>expr</code>&rsquo;s reference-ness, <code>expr</code> is const, ignore that, too. If it&rsquo;s <code>volatile</code>, also ignore that (refer to EMCpp item 40 for <code>volatile</code>).</li>
</ol>

<pre><code class="language-cpp">template&lt;typename T&gt;
void f(T param);  // param is now passed by value

int x = 27;         // as before
const int cx = x;   // as before
const int&amp; rx = x;  // as before
const char* const ptr = &quot;Fun with pointers&quot;; // ptr is const ptr to const obj.

f(x);  // T's and param's types are both int
f(cx); // T's and param's types are both int
f(rx); // T's and param's types are both int
f(ptr); // T's and param's types are const char*, the constness of ptr is ignored.
</code></pre>

<h4 id="array-arguments">Array Arguments</h4>

<p>Even though they sometimes seems to be interchangeable, array types are, in fact, different from pointer types. We had such equivalence illusion because, in many contexts, an array <em>decays</em> into a pointer to its first element:</p>

<pre><code class="language-cpp">const char name[] = &quot;J.P. Briggs&quot;;  // name's type is const char [13]
const char * ptrToName = name;      // array decays to pointer
</code></pre>

<p>Array parameter declarations are treated as if they were pointer parameters, so <code>void myFunc(int param[]);</code> is equivalent to <code>void myFunc(int* param);</code>. Thus, the type of an array that&rsquo;s passed to a template function by value is deduced to be a pointer type:</p>

<pre><code class="language-cpp">template&lt;typename T&gt;
void f(T param);

f(name);  // name is array, but T deduced as const char*
</code></pre>

<p>Although functions can&rsquo;t declare parameters that are truly arrays, they <em>can</em> declare parameters that are <em>references</em> to arrays. Thus,</p>

<pre><code class="language-cpp">template&lt;typename T&gt;
void f(T&amp; param);  // template with by-reference parameter

f(name);  // T is deduced as array type: const char [13], type of param is const char (&amp;)[13]
</code></pre>

<p>The actual type of the array includes the array size, so in this example, <code>T</code> is deduced to be <code>const char[13]</code>, and the type of <code>f</code>&rsquo;s parameter (a reference to this array) is <code>const char (&amp;)[13]</code>.</p>

<p>Using this ability to declare references to arrays enables creation of a template that deduces the number of elements that an array contains:</p>

<pre><code class="language-cpp">// return size of an array as a compile-time constant.
// array parameter has no name because we don't care its name
template&lt;typename T, std::size_t N&gt;
constexpr std::size_t arraySize(T (&amp;)[N]) noexcept
{
    return N;
}
</code></pre>

<p>There are two points worth noting in this declaration:</p>

<ol>
<li><p><code>constexpr</code>, as explained in EMCpp 15, makes the function result available during compilation, which makes it possible to declare an array with the same number of elements as a second array whose size is computed from a braced initializer:</p>

<pre><code class="language-cpp">int keyVals[] = { 1, 3, 7, 9, 11, 22, 35 };  // 7 elements
int mappedVals[arraySize(keyVals)]; // 7 elements
std::array&lt;int, arraySize(keyVals)&gt; values;  // size == 7
</code></pre></li>

<li><p><code>noexcept</code>, as explained in EMCpp 14, helps compilers generate better code.</p></li>
</ol>

<h4 id="function-arguments">Function Arguments</h4>

<p>Apart from arrays, function types can decay into function pointers, too. As a result:</p>

<pre><code class="language-cpp">void someFunc(int, double); // someFunc is a function, type is void(int, double)

template&lt;typename T&gt;
void f1(T param);  // in f1, param passed by value

template&lt;typename T&gt;
void f2(T&amp; param);  // in f2, param passed by ref

f1(someFunc);  // param deduced as ptr-to-func, type is void (*)(int, double)

f2(someFunc);  // param deduced as ref-to-func, type is void (&amp;)(int, double)
</code></pre>

<p>This rarely makes any difference in practice.</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">标签</span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://nianze.ml//tags/technique/">technique</a>

  <a class="tag tag--primary tag--small" href="http://nianze.ml//tags/cpp/">cpp</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.ml/2018/07/understand-auto-type-deduction/" data-tooltip="[EMCpp]Item-2 Understand Auto Type Deduction">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">下一篇</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.ml/2018/07/a-brif-review-of-dynamo/" data-tooltip="A Brif Review of Dynamo">
          
            <span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    

      <li class="post-action hide-xs">
        <div class="fb-share-button"
          data-href="http://nianze.ml/2018/07/understand-template-type-deduction/"
          data-layout="button_count">
        </div>
      </li>

      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2fnianze.ml%2f2018%2f07%2funderstand-template-type-deduction%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2fnianze.ml%2f2018%2f07%2funderstand-template-type-deduction%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>

    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "http://nianze.ml/2018/07/understand-template-type-deduction/";  
this.page.identifier = "[EMCpp]Item-1 Understand Template Type Deduction"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://robinhu.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 刀心の水|Nzo. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.ml/2018/07/understand-auto-type-deduction/" data-tooltip="[EMCpp]Item-2 Understand Auto Type Deduction">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">下一篇</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.ml/2018/07/a-brif-review-of-dynamo/" data-tooltip="A Brif Review of Dynamo">
          
            <span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    

      <li class="post-action hide-xs">
        <div class="fb-share-button"
          data-href="http://nianze.ml/2018/07/understand-template-type-deduction/"
          data-layout="button_count">
        </div>
      </li>

      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2fnianze.ml%2f2018%2f07%2funderstand-template-type-deduction%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2fnianze.ml%2f2018%2f07%2funderstand-template-type-deduction%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>

    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http%3a%2f%2fnianze.ml%2f2018%2f07%2funderstand-template-type-deduction%2f">
        <i class="fa fa-google-plus"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?app_id=1906806182974656&u=http%3a%2f%2fnianze.ml%2f2018%2f07%2funderstand-template-type-deduction%2f">
        <i class="fa fa-facebook-official"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2fnianze.ml%2f2018%2f07%2funderstand-template-type-deduction%2f">
        <i class="fa fa-twitter"></i><span></span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="http://nianze.ml/images/bio-picture.jpg" alt="作者的图片" />
    
    <h4 id="about-card-name">刀心の水|Nzo</h4>
    
      <div id="about-card-bio"><p>虚度廿余岁月浅，略识几行代码源。<br />
闲来随手快门按，黯然独把音韵弹。</p>

<p>A software developer who also love producing music and taking photo.</p>
</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        New York City
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="搜索" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/distinguish-betwenn--and--when-creating-objects/">
                <h3 class="media-heading">[EMCpp]Item-7 Distinguish Betwenn () and {} When Creating Objects</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Braced initialization is the most widely usable initialization syntax, which can also prevent narrowing conversions, as well as being immune to C++&rsquo;s most vexing parse.
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/use-the-explicitly-typed-initializer-idiom-when-auto-deduces-undesired-types/">
                <h3 class="media-heading">[EMCpp]Item-6 Use the Explicitly Typed Initializer Idiom when auto deduces undesired types</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>“Invisible” proxy types can cause <code>auto</code> to deduce the undesired type for an initializing expression, so we can adopt explicitly typed initializer idiom to force <code>auto</code> to deduce what we want.
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/prefer-auto-to-explicit-type-declarations/">
                <h3 class="media-heading">[EMCpp]Item-5 Prefer Auto to Explicit Type Declarations</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Despite some pitfalls described in EMCpp item 2 and 6, <code>auto</code> variables are preferred for they must be initialized, are generally immune to type mismatches that can lead to portability or efficiency problems, can ease the process of refactoring, and typically require less typing than variables with explicitly specified types.
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/know-how-to-view-deduced-types/">
                <h3 class="media-heading">[EMCpp]Item-4 Know How to View Deduced Types</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Deduced types can often be seen using IDE editors, compiler error messages, and the Boost TypeIndex library, but the results of some tools may be neither helpful nor accurate.
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/understand-decltype/">
                <h3 class="media-heading">[EMCpp]Item-3 Understand Decltype</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><code>decltype</code> almost always yields the type of a variable or expression without any modifications. For lvalue expressions of type T other than names, <code>decltype</code> always reports a type of T&amp;.
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/understand-auto-type-deduction/">
                <h3 class="media-heading">[EMCpp]Item-2 Understand Auto Type Deduction</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><code>auto</code> type deduction is usually the same as template type deduction, with an exception in the case of braced initializer. Also, in C++14, as a function return type or a lambda parameter, <code>auto</code> implies template type deduction instead of <code>auto</code> type deduction.
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/understand-template-type-deduction/">
                <h3 class="media-heading">[EMCpp]Item-1 Understand Template Type Deduction</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>There are three sets of rules for type deduction in modern C++: one for function templates, one for <code>auto</code>, and one for <code>decltype</code>. Without a solid understanding of how deduction operates, effective programming in modern C++ is all but impossible.
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/07/a-brif-review-of-dynamo/">
                <h3 class="media-heading">A Brif Review of Dynamo</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>As a highly available and scalable distributed data store, the design principles of Dynamo features high availability for writes (via reconciliation during reads), incremental scalability (consistent hashing), symmetry, decentralization, and heterogeneity (via virtual nodes).
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/06/a-sip-of-leica-m9/">
                <h3 class="media-heading">徕卡M9初体验</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>他们说徕卡调教过的那块柯达CCD自带德味，我不信，心想用卡西欧自拍神器理论上也能后期出那味道来。
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://nianze.ml/2018/06/a-simple-calculation/">
                <h3 class="media-heading">一个油腻中年大叔在儿童节的胡思乱想</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>张爱玲说，出名要趁早。
</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         129 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('http://nianze.ml/images/cover-v1.2.0.jpg');"></div>
  


    



<script src="http://nianze.ml/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'http:\/\/nianze.ml\/2018\/07\/understand-template-type-deduction\/';
          
            this.page.identifier = '\/2018\/07\/understand-template-type-deduction\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'daoxinzhishui';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

