<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="author" content="刀心の水">
<meta name="keywords" content=", visual, music, technology">
<meta name="description" content="There are three primary ways in which passing an object to a function or using that object to invoke a virtual function differs from throwing the object as an exception.">


<meta property="og:description" content="There are three primary ways in which passing an object to a function or using that object to invoke a virtual function differs from throwing the object as an exception.">
<meta property="og:type" content="article">
<meta property="og:title" content="[MECpp]Item-12 Understand How Throwing an Exception Differs From Passing a Parameter or Calling a Virtual Function">
<meta name="twitter:title" content="[MECpp]Item-12 Understand How Throwing an Exception Differs From Passing a Parameter or Calling a Virtual Function">
<meta property="og:url" content="http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
<meta property="twitter:url" content="http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
<meta property="og:site_name" content="Be creative">
<meta property="og:description" content="There are three primary ways in which passing an object to a function or using that object to invoke a virtual function differs from throwing the object as an exception.">
<meta name="twitter:description" content="There are three primary ways in which passing an object to a function or using that object to invoke a virtual function differs from throwing the object as an exception.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2018-04-04T11:28:07">
  
  
    <meta property="article:modified_time" content="2018-04-04T11:28:07">
  
  
  
    
      <meta property="article:section" content="technology">
    
      <meta property="article:section" content="coding">
    
  
  
    
      <meta property="article:tag" content="technique">
    
      <meta property="article:tag" content="cpp">
    
  


<meta name="twitter:card" content="summary">







  <meta property="og:image" content="http://nianze.tk/images/2018/2018-04/2018-04-04.gif">
  <meta property="twitter:image" content="http://nianze.tk/images/2018/2018-04/2018-04-04.gif">





  <meta property="og:image" content="http://nianze.tk/images/bw.JPG">
  <meta property="twitter:image" content="http://nianze.tk/images/bw.JPG">


    <title>[MECpp]Item-12 Understand How Throwing an Exception Differs From Passing a Parameter or Calling a Virtual Function</title>

    <link rel="icon" href="http://nianze.tk/favicon.png">
    

    

    <link rel="canonical" href="http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">

    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="http://nianze.tk/css/style-nnm2spxvve8onlujjlegkkytaehyadd4ksxc1hyzzq9a2wvtrgbljqyulomn.min.css" />
    
    
      
        <link rel="stylesheet" href="http://nianze.tk/css/main.css">
      
    
      
        <link rel="stylesheet" href="http://nianze.tk/css/loader.css">
      
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-71584380-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body id="container">
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fas fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="http://nianze.tk/">Be creative</a>
  </div>
  
    
      <a class="header-right-picture "
         href="http://nianze.tk/#about">
    
    
    
      
        <img class="header-picture" src="http://nianze.tk/images/bw.JPG" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="http://nianze.tk/#about">
          <img class="sidebar-profile-picture" src="http://nianze.tk/images/bw.JPG" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">刀心の水</h4>
        
          <h5 class="sidebar-profile-bio"><p>虚度廿余岁月浅，略识几行代码源。<br />
闲来随手快门按，怆然独把音韵弹。</p>

<p>Pain is inevitable.<br />
Suffering is optional.</p>
</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/">
    
      <i class="sidebar-button-icon fas fa-home" title='Home'></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/categories/thoughts">
    
      <i class="sidebar-button-icon fas fa-lightbulb" title='Thoughts'></i>
      
      <span class="sidebar-button-desc">Thoughts</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/categories/technology">
    
      <i class="sidebar-button-icon fas fa-code" title='Technology'></i>
      
      <span class="sidebar-button-desc">Technology</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/categories/music">
    
      <i class="sidebar-button-icon fas fa-music" title='Music'></i>
      
      <span class="sidebar-button-desc">Music</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/categories/visual">
    
      <i class="sidebar-button-icon fas fa-palette" title='Visual'></i>
      
      <span class="sidebar-button-desc">Visual</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/categories">
    
      <i class="sidebar-button-icon fas fa-bookmark" title='Categories'></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/tags">
    
      <i class="sidebar-button-icon fas fa-tags" title='Tags'></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/archives">
    
      <i class="sidebar-button-icon fas fa-archive" title='Archives'></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/about">
    
      <i class="sidebar-button-icon fas fa-user" title='About'></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/nianze" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fab fa-linkedin" title='LinkedIn'></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/Nianze" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fab fa-github" title='Github'></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.flickr.com/photos/129774362@N07/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fab fa-flickr", title='Flickr'></i>
      
      <span class="sidebar-button-desc">Flickr</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://instagram.com/eznain" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fab fa-instagram" title='Instagram'></i>
      
      <span class="sidebar-button-desc">Instagram</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.facebook.com/rym.lnz" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fab fa-facebook", title='Facebook'></i>
      
      <span class="sidebar-button-desc">Facebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/daoxinzhishui" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fab fa-twitter", title='Twitter'></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.youtube.com/user/daoxinzhishui" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fab fa-youtube", title='YouTube'></i>
      
      <span class="sidebar-button-desc">YouTube</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="mailto:daoxinzhishui@gmail.com" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fas fa-envelope", title='Email'></i>
      
      <span class="sidebar-button-desc">Email</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://nianze.tk/post/index.xml">
    
      <i class="sidebar-button-icon fas fa-rss-square", title='RSS'></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      [MECpp]Item-12 Understand How Throwing an Exception Differs From Passing a Parameter or Calling a Virtual Function
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-04-04T11:28:07-04:00">
        
  April 4, 2018

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="http://nianze.tk/categories/technology">technology</a>, 
    
      <a class="category-link" href="http://nianze.tk/categories/coding">coding</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>There are three primary ways in which passing an object to a function or using that object to invoke a virtual function differs from throwing the object as an exception.</p>

<h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
<ul>
<li><a href="#similarity">Similarity</a></li>
<li><a href="#differences">Differences</a>
<ul>
<li><a href="#difference-in-augument-passing">Difference in augument passing</a>
<ul>
<li><a href="#copying-based-on-static-type">Copying based on static type</a></li>
<li><a href="#rethrow">Rethrow</a></li>
<li><a href="#different-catch-syntax">Different <code>catch</code> syntax</a></li>
</ul></li>
<li><a href="#difference-in-type-matching">Difference in type matching</a></li>
<li><a href="#difference-in-fitting-strategy">Difference in fitting strategy</a></li>
</ul></li>
</ul>
</nav>

<h1 id="similarity">Similarity</h1>

<p>There is similarity between passing an argument from a function call site to the function&rsquo;s parameter and passing an exception from a <code>throw</code> site to a <code>catch</code> clause:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Widget</span> {...}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f1</span>(Widget w);
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f2</span>(Widget<span style="color:#f92672">&amp;</span> w);
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f3</span>(<span style="color:#66d9ef">const</span> Widget<span style="color:#f92672">&amp;</span> w);
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f4</span>(Widget <span style="color:#f92672">*</span>pw);
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f5</span>(<span style="color:#66d9ef">const</span> Widget <span style="color:#f92672">*</span>pw);

<span style="color:#66d9ef">catch</span> (Widget w) ...
<span style="color:#66d9ef">catch</span> (Widget<span style="color:#f92672">&amp;</span> w) ...
<span style="color:#66d9ef">catch</span> (<span style="color:#66d9ef">const</span> Widget<span style="color:#f92672">&amp;</span> w) ...
<span style="color:#66d9ef">catch</span> (Widget <span style="color:#f92672">*</span>pw) ...
<span style="color:#66d9ef">catch</span> (<span style="color:#66d9ef">const</span> Widget <span style="color:#f92672">*</span>pw) ...
</code></pre></div>
<h1 id="differences">Differences</h1>

<p>However, there are still three difference:</p>

<ol>
<li>exception objects are always copied (when caught by value, they are copied twice), while objects passed to function parameters need not be copied at all.</li>
<li>objects thrown as exceptions are subject to fewer forms of type conversion than are objects passed to functions.</li>
<li><code>catch</code> clauses are examined in the order in which they appear in the source code, and the first one that can succeed is selected for execution, while a virtual funciton invoked by an object is the one that provides the <em>best</em> match for the type of the object, even if it&rsquo;s not the first one listed in the source code.</li>
</ol>

<h2 id="difference-in-augument-passing">Difference in augument passing</h2>

<p>The first difference essentially grows out of the fact that when we call a function, control eventually returns to the call site, but when we throw an exception, constrol does <em>not</em> return to the <code>throw</code> site. For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">throwWidget</span>()
{
    Widget localWidget;
    <span style="color:#66d9ef">throw</span> localWidget; <span style="color:#75715e">// throw localWidget as an exception
</span><span style="color:#75715e"></span>}
</code></pre></div>
<p>In this typical case where <code>localWidget</code> will go out of scope once control leaves <code>throwWidget</code>, its destructor will be called, so C++ specifies that an object thrown as an exception is copied (even if the object being thrown is not in danger of being destroyed). This mandatory copying of exception objects leads to two implication:</p>

<ul>
<li>It is not possible for the <code>catch</code> block to modify <code>localWidget</code>; it can only modify a <em>copy</em> of <code>localWidget</code></li>
<li>Throwing an exception is typically much slower than parameter passing.</li>
</ul>

<h3 id="copying-based-on-static-type">Copying based on static type</h3>

<p>It is worth noting that in C++ copying is always based on an object&rsquo;s static type (MECpp item 25 shows a technique to copy based on dynamic type). Thus,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Widget</span> {...};
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SpecialWidget</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Widget {...};

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">throwWidget</span>()
{
    SpecialWidget localSpecialWidget;
    Widget<span style="color:#f92672">&amp;</span> rw <span style="color:#f92672">=</span> localSpecialWidget <span style="color:#75715e">// rw refers to a SpecialWidget
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">throw</span> rw;  <span style="color:#75715e">// this throws an exception of type Widget
</span><span style="color:#75715e"></span>}
</code></pre></div>
<h3 id="rethrow">Rethrow</h3>

<p>Another impact caused from copying exceptions objects is that there&rsquo;s difference between different rethrow statements:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">catch</span> (Widget<span style="color:#f92672">&amp;</span> w)  <span style="color:#75715e">// catch Widget exceptions
</span><span style="color:#75715e"></span>{
    ...
    <span style="color:#66d9ef">throw</span>;  <span style="color:#75715e">// rethrow the exception so it continues to propagate
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">catch</span> (Widget<span style="color:#f92672">&amp;</span> w)  <span style="color:#75715e">// catch Widget exceptions
</span><span style="color:#75715e"></span>{
    ...
    <span style="color:#66d9ef">throw</span> w;  <span style="color:#75715e">// propagate a copy of the caught exception
</span><span style="color:#75715e"></span>}
</code></pre></div>
<p>Here, the first block rethrows the current exception, while the second one throws a new copy of the current exception. Apart from performance cost of the additional copy operation in the second block, there&rsquo;s another suble difference: if the exception originally thrown was of type <code>SpecialWidget</code>, the first block would propagate a <code>SpecialWidget</code> exception (even though <code>w</code>&rsquo;s static type is <code>Widget</code>) and no copy is made during <code>throw;</code>, while the second <code>catch</code> block throws a <em>new</em> exception being the type of <code>Widget</code>.</p>

<p>In general, we&rsquo;ll want to use the</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">throw</span>;
</code></pre></div>
<p>syntax to rethrow the current exception for its consistency and efficiency.</p>

<h3 id="different-catch-syntax">Different <code>catch</code> syntax</h3>

<p>There are three kinds of <code>catch</code> clauses for exception of type <code>Widget</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">catch</span> (Widget w) ...  <span style="color:#75715e">// catch by value
</span><span style="color:#75715e"></span><span style="color:#66d9ef">catch</span> (Widget<span style="color:#f92672">&amp;</span> w) ... <span style="color:#75715e">// catch by reference
</span><span style="color:#75715e"></span><span style="color:#66d9ef">catch</span> (<span style="color:#66d9ef">const</span> Widget<span style="color:#f92672">&amp;</span> w) ... <span style="color:#75715e">// catch by reference-to-const
</span></code></pre></div>
<p>A few points to note:</p>

<ul>
<li>A thrown object (which is always a copied temporary) may be caught by simple reference, but it is not allowed in function calls (item 19) to pass a temporary object to a non-<code>const</code> reference parameter.</li>
<li>The first statement (catch by value) leads to <em>two</em> copies of the thrown object, one to create the temporary that all exceptions generate, the other to copy that temporary into <code>w</code>.</li>
<li>For the catch by reference and catch by reference-to-const, we expect to pay for one copy of the exception. In contrast, when we pass function parameters by reference (or reference-to-const), no copying takes place.</li>
<li>Throw by pointer is equivalent to pass by pointer. Either way, a copy of the pointer is passed. Just remember not to throw a pointer to a local object.</li>
</ul>

<h2 id="difference-in-type-matching">Difference in type matching</h2>

<p>Implicit conversions (such from <code>int</code> to <code>double</code>) are not applied when matching exceptions to <code>catch</code> clauses:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> value)
{
    <span style="color:#66d9ef">try</span> {
        <span style="color:#66d9ef">if</span> (someFunction()) {
            <span style="color:#66d9ef">throw</span> value;
        }
        ...
    }
    <span style="color:#66d9ef">catch</span> (<span style="color:#66d9ef">double</span> d) { <span style="color:#75715e">// handle double type exceptions
</span><span style="color:#75715e"></span>        ...
    }
    ...
}
</code></pre></div>
<p>In this case, the <code>int</code> exception thrown in <code>try</code> block will never be caught by the <code>catch</code> clause taking a <code>double</code>.</p>

<p>Basically, two kinds of conversions are applied during <code>catch</code> matching:</p>

<ol>
<li><p>inheritance-based conversions
For example, <code>range_error</code>, <code>underflow_error</code>, and <code>overflow_error</code> are derived types from <code>runtime_error</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">catch</span> (runtime_error) ...         <span style="color:#75715e">// can catch errors of type
</span><span style="color:#75715e"></span><span style="color:#66d9ef">catch</span> (runtime_error<span style="color:#f92672">&amp;</span>) ...        <span style="color:#75715e">// runtime_error,
</span><span style="color:#75715e"></span><span style="color:#66d9ef">catch</span> (<span style="color:#66d9ef">const</span> runtime_error<span style="color:#f92672">&amp;</span>) ...  <span style="color:#75715e">// range_error, or overflow_error
</span><span style="color:#75715e"></span>    
<span style="color:#66d9ef">catch</span> (runtime_error<span style="color:#f92672">*</span>) ...        <span style="color:#75715e">// can catch errors of type runtime_error*
</span><span style="color:#75715e"></span><span style="color:#66d9ef">catch</span> (<span style="color:#66d9ef">const</span> runtime_error<span style="color:#f92672">*</span>) ...  <span style="color:#75715e">// range_error*, or overflow_error*
</span></code></pre></div></li>

<li><p>from a typed to an untyped pointer</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">catch</span> (<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span>) ...   <span style="color:#75715e">// catches any exception that&#39;s a pointer
</span></code></pre></div></li>
</ol>

<h2 id="difference-in-fitting-strategy">Difference in fitting strategy</h2>

<p>Catch clauses are always tried in the order of their appearance (employing a &ldquo;first fit&rdquo; strategy). For exampel:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">try</span> {
    ...
}
<span style="color:#66d9ef">catch</span> (logic_error<span style="color:#f92672">&amp;</span> ex) {  <span style="color:#75715e">// this block will catch all logic_error exceptions
</span><span style="color:#75715e"></span>    ...                    <span style="color:#75715e">// including invalid_argument exception, which is derived type
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">catch</span> (invalid_argument<span style="color:#f92672">&amp;</span> ed) {
    ...
}
</code></pre></div>
<p>on the contrary, when we call a virtual function, the function invoked is the one in the class <code>closest</code> to the dynamica type of the object invoking the function (employing a &ldquo;best fit&rdquo; algorithm).</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://nianze.tk/tags/technique/">technique</a>

  <a class="tag tag--primary tag--small" href="http://nianze.tk/tags/cpp/">cpp</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.tk/2018/04/catch-exceptions-by-reference/" data-tooltip="[MECpp]Item-13 Catch Exceptions by Reference">
              
                  <i class="fas fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.tk/2018/04/prevent-exceptions-from-leaving-destructors/" data-tooltip="[MECpp]Item-11 Prevent Exceptions From Leaving Destructors">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fas fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fas fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
              <i class="fab fa-facebook-f"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
              <i class="fab fa-google-plus-g"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#utteranc_thread" data-tooltip="Comments">
            <i class="fas fa-comment-dots"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents" data-tooltip="Table of Contents">
            <i class="fas fa-list"></i>
        
          </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="utteranc_thread">
  <script src="https://utteranc.es/client.js"
    repo= "Nianze/personal-site-comments"
    issue-term="pathname"
    theme="github-light"
    label="✨comment 💬"
    crossorigin="anonymous"
    async>
  </script>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 刀心の水. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.tk/2018/04/catch-exceptions-by-reference/" data-tooltip="[MECpp]Item-13 Catch Exceptions by Reference">
              
                  <i class="fas fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="http://nianze.tk/2018/04/prevent-exceptions-from-leaving-destructors/" data-tooltip="[MECpp]Item-11 Prevent Exceptions From Leaving Destructors">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fas fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fas fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
              <i class="fab fa-facebook-f"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://nianze.tk/2018/04/understand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function/">
              <i class="fab fa-google-plus-g"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#utteranc_thread" data-tooltip="Comments">
            <i class="fas fa-comment-dots"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents" data-tooltip="Table of Contents">
            <i class="fas fa-list"></i>
        
          </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fas fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fnianze.tk%2F2018%2F04%2Funderstand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function%2F">
          <i class="fa fa-facebook-f"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http%3A%2F%2Fnianze.tk%2F2018%2F04%2Funderstand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http%3A%2F%2Fnianze.tk%2F2018%2F04%2Funderstand-how-throwing-an-exception-differs-from-passing-a-parameter-or-calling-a-virtual-function%2F">
          <i class="fa fa-google-plus-g"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fas fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="http://nianze.tk/images/bw.JPG" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">刀心の水</h4>
    
      <div id="about-card-bio"><p>虚度廿余岁月浅，略识几行代码源。<br />
闲来随手快门按，怆然独把音韵弹。</p>

<p>Pain is inevitable.<br />
Suffering is optional.</p>
</div>
    
    
      <div id="about-card-job">
        <i class="fas fa-laptop-code"></i>
        <br/>
        Developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fas fa-map-marked-alt"></i>
        <br/>
        New York
      </div>
    
  </div>
</div>

    

    
  
    
      
      <div id="cover" style="background-image:url('http://nianze.tk/images/reservoir.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.2.0/imagesloaded.pkgd.min.js"></script>


<script src="http://nianze.tk/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>


  
    <script src="http://nianze.tk/js/loader.js"></script>
  

<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>





    
  </body>
</html>

